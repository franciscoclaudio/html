<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>Ferramentas Vetoriais</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    *, *::before, *::after {
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background-image: url("https://blog.stoodi.com.br/wp-content/uploads/2020/02/goemetria-anal%C3%ADtica-1024x674.jpg");
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center center;
      background-attachment: fixed;
      min-height: 100vh;
      position: relative;
    }

    body::before { 
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.45); 
      z-index: -1; 
    }

    .container {
      max-width: 420px;
      margin: 25px auto;
      padding: 22px 16px;
      background: rgba(255, 255, 255, 0.97);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.35);
      border-radius: 14px;
    }

    h1 {
      font-size: 1.65em;
      color: #1a202c;
      text-align: center;
      margin: 0 0 18px 0;
      font-weight: 700;
      letter-spacing: -0.5px;
    }

    label {
      font-size: 0.88em;
      margin-bottom: 5px;
      display: block;
      color: #2d3748;
      font-weight: 600;
    }

    select {
      width: 100%;
      font-size: 0.9em;
      padding: 9px 11px;
      margin-bottom: 16px;
      border: 2px solid #cbd5e0;
      border-radius: 7px;
      background-color: white;
      transition: all 0.25s;
      cursor: pointer;
      color: #2d3748;
    }

    select:focus {
      border-color: #3182ce;
      outline: none;
      box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
    }

    .input-group {
      margin-bottom: 13px;
    }

    .coord-group {
      display: flex;
      gap: 5px;
    }

    .coord-group input {
      flex: 1;
      min-width: 0;
      font-size: 0.82em;
      padding: 7px 3px;
      border: 2px solid #cbd5e0;
      border-radius: 6px;
      text-align: center;
      transition: all 0.25s;
      background-color: white;
      color: #2d3748;
      font-weight: 500;
    }

    .coord-group input:focus {
      border-color: #3182ce;
      outline: none;
      box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
    }

    .coord-group input::placeholder {
      color: #a0aec0;
      font-weight: 600;
    }

    .input-d input {
      width: 100%;
      font-size: 0.82em;
      padding: 7px 10px;
      border: 2px solid #cbd5e0;
      border-radius: 6px;
      transition: all 0.25s;
      background-color: white;
      color: #2d3748;
    }

    .input-d input:focus {
      border-color: #3182ce;
      outline: none;
      box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
    }

    button {
      width: 100%;
      background: linear-gradient(135deg, #3182ce 0%, #2c5aa0 100%);
      color: #fff;
      font-size: 0.95em;
      font-weight: 700;
      padding: 11px;
      border: none;
      border-radius: 7px;
      cursor: pointer;
      margin-top: 8px;
      margin-bottom: 6px;
      box-shadow: 0 4px 14px rgba(49, 130, 206, 0.35);
      transition: all 0.25s;
      letter-spacing: 0.3px;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 18px rgba(49, 130, 206, 0.45);
      background: linear-gradient(135deg, #2c5aa0 0%, #2a4d8f 100%);
    }

    button:active {
      transform: translateY(0);
      box-shadow: 0 2px 8px rgba(49, 130, 206, 0.3);
    }

    #resultado {
      font-size: 0.9em;
      background: linear-gradient(135deg, #ebf8ff 0%, #bee3f8 100%);
      color: #1a202c;
      padding: 13px;
      border-radius: 8px;
      margin-top: 12px;
      font-weight: 600;
      text-align: center;
      word-wrap: break-word;
      word-break: break-word;
      border: 2px solid #3182ce;
      min-height: 45px;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1.4;
    }

    #resultado:empty {
      display: none;
    }

    @media (max-width: 600px) {
      .container {
        max-width: calc(100% - 16px);
        margin: 12px 8px;
        padding: 18px 13px;
      }

      h1 {
        font-size: 1.4em;
        margin-bottom: 14px;
      }

      label {
        font-size: 0.83em;
      }

      select, button {
        font-size: 0.87em;
      }

      .coord-group {
        gap: 4px;
      }

      .coord-group input {
        font-size: 0.78em;
        padding: 6px 2px;
      }

      .input-d input {
        font-size: 0.78em;
        padding: 6px 8px;
      }

      #resultado {
        font-size: 0.85em;
        padding: 11px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üßÆ Ferramentas Vetoriais</h1>
    
    <label for="opcao">Escolha uma opera√ß√£o:</label>
    <select id="opcao">
      <option value="1">Produto escalar</option>
      <option value="2">Produto vetorial</option>
      <option value="3">M√≥dulo de vetor</option>
      <option value="4">Proje√ß√£o de v1 sobre v2</option>
      <option value="5">Vetor Altura do paralelogramo</option>
      <option value="6">Equa√ß√£o do plano</option>
      <option value="7">Dist√¢ncia de ponto ao plano</option>
      <option value="8">Soma de vetores</option>
      <option value="9">Subtra√ß√£o de vetores</option>
      <option value="10">Dist√¢ncia de ponto √† reta</option>
    </select>

    <form id="formulario"></form>
    
    <button onclick="calcular()">Calcular</button>
    
    <div id="resultado"></div>
  </div>

<script>
function prod_esc(v1, v2) {
  return v1.reduce((acc, val, i) => acc + val * v2[i], 0);
}

function prod_vet(v1, v2) {
  return [
    v1[1]*v2[2] - v1[2]*v2[1],
    -(v1[0]*v2[2] - v1[2]*v2[0]),
    v1[0]*v2[1] - v1[1]*v2[0]
  ];
}

function mod(v1) {
  return Math.sqrt(v1.reduce((acc, val) => acc + val*val, 0));
}

function proj(v1, v2) {
  let mod_v2_sq = mod(v2) * mod(v2);
  if (mod_v2_sq === 0) {
    throw new Error("O vetor v2 n√£o pode ser o vetor nulo (divis√£o por zero).");
  }
  let alpha = prod_esc(v1, v2) / mod_v2_sq;
  return v2.map(x => alpha * x);
}

function alt(v1, v2) {
  let projecao = proj(v1, v2);
  return v1.map((x, i) => x - projecao[i]);
}

function equacao_plano(v1, v2, p) {
  let diretor = prod_vet(v1, v2);
  let d = -(diretor[0]*p[0] + diretor[1]*p[1] + diretor[2]*p[2]);
  return [...diretor, d];
}

function print_vet(v) {
  return `[${v.map(x => x.toFixed(4)).join(', ')}]`;
}

function distancia_ponto_plano(p, n, d) {
  let mod_val = n.reduce((acc, ni, i) => acc + ni * p[i], 0) + d;
  let n1 = n.reduce((acc, ni) => acc + ni*ni, 0);
  if (n1 === 0) {
    throw new Error("O vetor normal do plano n√£o pode ser o vetor nulo.");
  }
  return Math.abs(mod_val) / Math.sqrt(n1);
}

function soma_vet(v1, v2) {
  return v1.map((x, i) => x + v2[i]);
}

function sub_vet(v1, v2) {
  return v1.map((x, i) => x - v2[i]);
}

function distancia_ponto_reta(P, Po, V) {
  let mod_V = mod(V);
  if (mod_V === 0) {
    throw new Error("O vetor diretor da reta n√£o pode ser o vetor nulo.");
  }
  let vetor = sub_vet(P, Po);
  let vetor_prod = prod_vet(vetor, V);
  return mod(vetor_prod) / mod_V;
}

function criarInputs(campos) {
  let form = document.getElementById('formulario');
  form.innerHTML = '';
  
  campos.forEach(campo => {
    let grupo = document.createElement('div');
    grupo.className = 'input-group';
    grupo.innerHTML = `<label>${campo.label}</label>`;
    
    let coordGroup = document.createElement('div');
    coordGroup.className = 'coord-group';
    
    for(let i=0; i<campo.dim; i++) {
      let placeholderText = (i === 0) ? 'i' : (i === 1) ? 'j' : 'k';
      let input = document.createElement('input');
      input.type = 'number';
      input.step = 'any';
      input.id = campo.nome + i;
      input.placeholder = placeholderText;
      input.required = true;
      coordGroup.appendChild(input);
    }
    
    grupo.appendChild(coordGroup);
    form.appendChild(grupo);
  });
  
  if(campos.some(c => c.nome === "n") && campos.some(c => c.nome === "p")) {
    let grupo = document.createElement('div');
    grupo.className = 'input-group input-d';
    grupo.innerHTML = `<label for="d">Constante do plano (d):</label>
    <input type="number" step="any" id="d" placeholder="Valor de d" required>`;
    form.appendChild(grupo);
  }
}

function getVetor(nome, dim=3) {
  let v = [];
  for(let i=0; i<dim; i++) {
    v.push(parseFloat(document.getElementById(nome+i).value));
  }
  return v;
}

document.getElementById('opcao').addEventListener('change', function() {
  const val = this.value;
  let campos = [];
  
  if(val=="1"||val=="2"||val=="4"||val=="5"||val=="8"||val=="9")
    campos=[{nome:"v1", label:"Vetor v1:", dim:3},{nome:"v2", label:"Vetor v2:", dim:3}];
  else if(val=="3")
    campos=[{nome:"v1", label:"Vetor:", dim:3}];
  else if(val=="6")
    campos=[{nome:"v1", label:"Vetor v1 (dire√ß√£o):", dim:3},{nome:"v2", label:"Vetor v2 (dire√ß√£o):", dim:3},{nome:"p", label:"Ponto do plano (Po):", dim:3}];
  else if(val=="7")
    campos=[{nome:"p", label:"Ponto P:", dim:3},{nome:"n", label:"Normal do plano (n):", dim:3}];
  else if(val=="10")
    campos=[{nome:"P", label:"Ponto P:", dim:3},{nome:"Po", label:"Ponto Po (origem):", dim:3},{nome:"V", label:"Vetor diretor (V):", dim:3}];
  
  criarInputs(campos);
  document.getElementById('resultado').textContent = '';
});

document.getElementById('opcao').dispatchEvent(new Event('change'));

function calcular() {
  const val = document.getElementById('opcao').value;
  let res = '';
  
  try {
    if(val=="1") {
      let v1=getVetor('v1'), v2=getVetor('v2');
      res = "Produto escalar: " + prod_esc(v1,v2).toFixed(4);
    }
    else if(val=="2") {
      let v1=getVetor('v1'), v2=getVetor('v2');
      res = "Produto vetorial: " + print_vet(prod_vet(v1,v2));
    }
    else if(val=="3") {
      let v1=getVetor('v1');
      res = "M√≥dulo do vetor: " + mod(v1).toFixed(4);
    }
    else if(val=="4") {
      let v1=getVetor('v1'), v2=getVetor('v2');
      res = "Proje√ß√£o de v1 sobre v2: " + print_vet(proj(v1,v2));
    }
    else if(val=="5") {
      let v1=getVetor('v1'), v2=getVetor('v2');
      let altura = alt(v1, v2);
      res = "Vetor Altura: " + print_vet(altura) + " | M√≥dulo: " + mod(altura).toFixed(4);
    }
    else if(val=="6") {
      let v1=getVetor('v1'), v2=getVetor('v2'), p=getVetor('p');
      let eq = equacao_plano(v1,v2,p);
      if (mod([eq[0], eq[1], eq[2]]) === 0) {
        throw new Error("Vetores de dire√ß√£o paralelos. O plano n√£o pode ser determinado.");
      }
      res = `Equa√ß√£o: ${eq[0].toFixed(4)}X + ${eq[1].toFixed(4)}Y + ${eq[2].toFixed(4)}Z + ${eq[3].toFixed(4)} = 0`;
    }
    else if(val=="7") {
      let p=getVetor('p'), n=getVetor('n');
      let d=parseFloat(document.getElementById('d').value);
      res = "Dist√¢ncia do ponto ao plano: " + distancia_ponto_plano(p,n,d).toFixed(4);
    }
    else if(val=="8") {
      let v1=getVetor('v1'), v2=getVetor('v2');
      res = "Soma dos vetores: " + print_vet(soma_vet(v1,v2));
    }
    else if(val=="9") {
      let v1=getVetor('v1'), v2=getVetor('v2');
      res = "Subtra√ß√£o dos vetores: " + print_vet(sub_vet(v1,v2));
    }
    else if(val=="10") {
      let P=getVetor('P'), Po=getVetor('Po'), V=getVetor('V');
      let distancia = distancia_ponto_reta(P,Po,V);
      res = "Dist√¢ncia do ponto √† reta: " + distancia.toFixed(4);
    }
  } catch(e) {
    res = "‚ö†Ô∏è Erro: " + (e.message || "Preencha todos os campos corretamente!");
  }
  
  document.getElementById('resultado').textContent = res;
}
</script>
</body>
</html>
